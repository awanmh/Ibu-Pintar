"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[462],{462:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var n=t(641),o=t(751),s=t(33),l=t(953),i=t(278),d=t(220),r=t(317);const u={class:"login-container"},c={class:"login-form"},g={class:"form-group"},p={class:"form-group"},m={key:0,class:"error"},h={__name:"LoginView",setup(e){const a=(0,l.KR)(""),t=(0,l.KR)(""),h=(0,l.KR)(""),k=(0,i.Pj)(),v=(0,d.rd)(),L=async()=>{try{h.value="",await k.dispatch("auth/login",{email:a.value,password:t.value});const e=k.getters["auth/currentUser"]?.role;"admin"===e?v.push("/admin"):"visitor"===e?v.push("/"):v.push("/login")}catch(e){h.value=e.response?.data?.message||"Login gagal."}},f=async e=>{try{const{data:a}=await r.A.googleLogin({credential:e.credential});localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",a.token),k.commit("auth/AUTH_SUCCESS",{user:a,token:a.token}),"admin"===a.role?v.push("/admin"):v.push("/")}catch(a){h.value=a.response?.data?.message||"Login Google gagal."}};return(0,n.sV)((()=>{if(k.getters["auth/isLoggedIn"]){const e=k.getters["auth/currentUser"]?.role;"admin"===e?v.push("/admin"):v.push("/")}window.handleGoogleCredentialResponse=f;const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,document.head.appendChild(e)})),(e,l)=>((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",c,[l[5]||(l[5]=(0,n.Lk)("h1",null,"Login",-1)),(0,n.Lk)("form",{onSubmit:(0,o.D$)(L,["prevent"])},[(0,n.Lk)("div",g,[l[2]||(l[2]=(0,n.Lk)("label",{for:"email"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),id:"email",required:""},null,512),[[o.Jo,a.value]])]),(0,n.Lk)("div",p,[l[3]||(l[3]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":l[1]||(l[1]=e=>t.value=e),id:"password",required:"",minlength:"6"},null,512),[[o.Jo,t.value]])]),l[4]||(l[4]=(0,n.Lk)("button",{type:"submit"},"Login",-1)),h.value?((0,n.uX)(),(0,n.CE)("p",m,(0,s.v_)(h.value),1)):(0,n.Q3)("",!0)],32),l[6]||(l[6]=(0,n.Lk)("div",{class:"separator"},[(0,n.Lk)("span",null,"atau")],-1)),l[7]||(l[7]=(0,n.Lk)("div",{id:"g_id_onload","data-client_id":"922035780127-rqc8q5lebeq3l85c720ikc1c6dfv9mbe.apps.googleusercontent.com","data-callback":"handleGoogleCredentialResponse","data-auto_prompt":"false"},null,-1)),l[8]||(l[8]=(0,n.Lk)("div",{class:"g_id_signin","data-type":"standard","data-size":"large","data-theme":"outline","data-text":"sign_in_with","data-shape":"rectangular","data-logo_alignment":"left"},null,-1))])]))}};var k=t(262);const v=(0,k.A)(h,[["__scopeId","data-v-d1017db8"]]),L=v}}]);
//# sourceMappingURL=462.97b35ceb.js.map