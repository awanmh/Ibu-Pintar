{"version":3,"file":"js/462.97b35ceb.js","mappings":"sWA+CA,MAAMA,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAWD,EAAAA,EAAAA,IAAI,IACfE,GAAQF,EAAAA,EAAAA,IAAI,IAEZG,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,EAAcC,UAClB,IACEN,EAAMO,MAAQ,SACRN,EAAMO,SAAS,aAAc,CAAEX,MAAOA,EAAMU,MAAOR,SAAUA,EAASQ,QAE5E,MAAME,EAAOR,EAAMS,QAAQ,qBAAqBD,KACnC,UAATA,EACFN,EAAOQ,KAAK,UACM,YAATF,EACTN,EAAOQ,KAAK,KAEZR,EAAOQ,KAAK,SAEhB,CAAE,MAAOC,GACPZ,EAAMO,MAAQK,EAAIC,UAAUC,MAAMC,SAAW,cAC/C,GAGIC,EAAiCV,UACrC,IAEE,MAAM,KAAEQ,SAAeG,EAAAA,EAAWC,YAAY,CAAEC,WAAYN,EAASM,aAGrEC,aAAaC,QAAQ,OAAQC,KAAKC,UAAUT,IAC5CM,aAAaC,QAAQ,QAASP,EAAKU,OACnCvB,EAAMwB,OAAO,oBAAqB,CAAEC,KAAMZ,EAAMU,MAAOV,EAAKU,QAG1C,UAAdV,EAAKL,KACPN,EAAOQ,KAAK,UAEZR,EAAOQ,KAAK,IAEhB,CAAE,MAAOC,GACPZ,EAAMO,MAAQK,EAAIC,UAAUC,MAAMC,SAAW,qBAC/C,G,OAGFY,EAAAA,EAAAA,KAAU,KAER,GAAI1B,EAAMS,QAAQ,mBAAoB,CACpC,MAAMD,EAAOR,EAAMS,QAAQ,qBAAqBD,KACnC,UAATA,EACFN,EAAOQ,KAAK,UAEZR,EAAOQ,KAAK,IAEhB,CAGAiB,OAAOZ,+BAAiCA,EAExC,MAAMa,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAM,yCACbH,EAAOvB,OAAQ,EACfuB,EAAOI,OAAQ,EACfH,SAASI,KAAKC,YAAYN,M,oBA9G1BO,EAAAA,EAAAA,IAqCM,MArCNC,EAqCM,EApCJC,EAAAA,EAAAA,IAmCM,MAnCNC,EAmCM,cAlCJD,EAAAA,EAAAA,IAAc,UAAV,SAAK,KAETA,EAAAA,EAAAA,IAaO,QAbAE,UAAMC,EAAAA,EAAAA,IAAUpC,EAAW,c,EAChCiC,EAAAA,EAAAA,IAGM,MAHNI,EAGM,cAFJJ,EAAAA,EAAAA,IAAgC,SAAzBK,IAAI,SAAQ,SAAK,cACxBL,EAAAA,EAAAA,IAA0D,SAAnDM,KAAK,Q,qCAAiB/C,EAAKU,MAAAsC,GAAEC,GAAG,QAAQC,SAAA,I,iBAAlBlD,EAAAU,YAG/B+B,EAAAA,EAAAA,IAGM,MAHNU,EAGM,cAFJV,EAAAA,EAAAA,IAAsC,SAA/BK,IAAI,YAAW,YAAQ,cAC9BL,EAAAA,EAAAA,IAAiF,SAA1EM,KAAK,W,qCAAoB7C,EAAQQ,MAAAsC,GAAEC,GAAG,WAAWC,SAAA,GAASE,UAAU,K,iBAA3ClD,EAAAQ,WAAQ,aAG1C+B,EAAAA,EAAAA,IAAoC,UAA5BM,KAAK,UAAS,SAAK,IAClB5C,EAAAO,QAAK,WAAd6B,EAAAA,EAAAA,IAA6C,IAA7Cc,GAA6CC,EAAAA,EAAAA,IAAZnD,EAAAO,OAAK,sCAGxC+B,EAAAA,EAAAA,IAEM,OAFDc,MAAM,aAAW,EACpBd,EAAAA,EAAAA,IAAiB,YAAX,UAAI,iBAGZA,EAAAA,EAAAA,IAIM,OAJDQ,GAAG,cACH,iBAAe,2EACf,gBAAc,iCACd,mBAAiB,S,uBAEtBR,EAAAA,EAAAA,IAOM,OAPDc,MAAM,cACN,YAAU,WACV,YAAU,QACV,aAAW,UACX,YAAU,eACV,aAAW,cACX,sBAAoB,Q,8BC7B/B,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,G","sources":["webpack://frontend/./src/views/auth/LoginView.vue","webpack://frontend/./src/views/auth/LoginView.vue?4511"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-form\">\r\n      <h1>Login</h1>\r\n\r\n      <form @submit.prevent=\"handleLogin\">\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">Email</label>\r\n          <input type=\"email\" v-model=\"email\" id=\"email\" required />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">Password</label>\r\n          <input type=\"password\" v-model=\"password\" id=\"password\" required minlength=\"6\" />\r\n        </div>\r\n\r\n        <button type=\"submit\">Login</button>\r\n        <p v-if=\"error\" class=\"error\">{{ error }}</p>\r\n      </form>\r\n\r\n      <div class=\"separator\">\r\n        <span>atau</span>\r\n      </div>\r\n\r\n      <div id=\"g_id_onload\"\r\n           data-client_id=\"922035780127-rqc8q5lebeq3l85c720ikc1c6dfv9mbe.apps.googleusercontent.com\"\r\n           data-callback=\"handleGoogleCredentialResponse\"\r\n           data-auto_prompt=\"false\">\r\n      </div>\r\n      <div class=\"g_id_signin\"\r\n           data-type=\"standard\"\r\n           data-size=\"large\"\r\n           data-theme=\"outline\"\r\n           data-text=\"sign_in_with\"\r\n           data-shape=\"rectangular\"\r\n           data-logo_alignment=\"left\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport ApiService from '@/services/ApiService';\r\n\r\nconst email = ref('');\r\nconst password = ref('');\r\nconst error = ref('');\r\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\n\r\nconst handleLogin = async () => {\r\n  try {\r\n    error.value = '';\r\n    await store.dispatch('auth/login', { email: email.value, password: password.value });\r\n\r\n    const role = store.getters['auth/currentUser']?.role;\r\n    if (role === 'admin') {\r\n      router.push('/admin');\r\n    } else if (role === 'visitor') {\r\n      router.push('/');\r\n    } else {\r\n      router.push('/login');\r\n    }\r\n  } catch (err) {\r\n    error.value = err.response?.data?.message || 'Login gagal.';\r\n  }\r\n};\r\n\r\nconst handleGoogleCredentialResponse = async (response) => {\r\n  try {\r\n    // 2. Ganti seluruh isi fungsi ini\r\n    const { data } = await ApiService.googleLogin({ credential: response.credential });\r\n\r\n    // Simpan data user dan token ke local storage dan Vuex\r\n    localStorage.setItem('user', JSON.stringify(data));\r\n    localStorage.setItem('token', data.token);\r\n    store.commit('auth/AUTH_SUCCESS', { user: data, token: data.token });\r\n\r\n    // Arahkan ke halaman yang sesuai\r\n    if (data.role === 'admin') {\r\n      router.push('/admin');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  } catch (err) {\r\n    error.value = err.response?.data?.message || 'Login Google gagal.';\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  // Cegah akses ke halaman login jika sudah login\r\n  if (store.getters['auth/isLoggedIn']) {\r\n    const role = store.getters['auth/currentUser']?.role;\r\n    if (role === 'admin') {\r\n      router.push('/admin');\r\n    } else {\r\n      router.push('/');\r\n    }\r\n  }\r\n\r\n  // Daftarkan callback Google\r\n  window.handleGoogleCredentialResponse = handleGoogleCredentialResponse;\r\n\r\n  const script = document.createElement('script');\r\n  script.src = 'https://accounts.google.com/gsi/client';\r\n  script.async = true;\r\n  script.defer = true;\r\n  document.head.appendChild(script);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background: #f4f4f4;\r\n}\r\n\r\n.login-form {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 0 15px rgba(0,0,0,0.1);\r\n  width: 350px;\r\n}\r\n\r\nh1 {\r\n  text-align: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: .5rem;\r\n}\r\n\r\ninput {\r\n  width: 100%;\r\n  padding: .5rem;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: .75rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n.separator {\r\n  text-align: center;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.separator span {\r\n  background: white;\r\n  padding: 0 10px;\r\n  color: #888;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  margin-top: .5rem;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import script from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=d1017db8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d1017db8\"]])\n\nexport default __exports__"],"names":["email","ref","password","error","store","useStore","router","useRouter","handleLogin","async","value","dispatch","role","getters","push","err","response","data","message","handleGoogleCredentialResponse","ApiService","googleLogin","credential","localStorage","setItem","JSON","stringify","token","commit","user","onMounted","window","script","document","createElement","src","defer","head","appendChild","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_withModifiers","_hoisted_3","for","type","$event","id","required","_hoisted_4","minlength","_hoisted_5","_toDisplayString","class","__exports__"],"sourceRoot":""}