{"ast":null,"code":"import { ref, onMounted, computed, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { dummyArticles } from '@/data/articles.js';\nimport { formatDate } from '@/utils/formatDate';\n\n// Impor komponen baru yang akan digunakan\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\nimport CommentSection from '@/components/articles/CommentSection.vue';\nexport default {\n  __name: 'ArticleDetailView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const article = ref(null);\n    const loading = ref(true);\n    const error = ref(null);\n\n    // Fungsi terpusat untuk mengambil data artikel\n    const fetchArticleData = id => {\n      loading.value = true;\n      article.value = null;\n      error.value = null;\n      if (!dummyArticles || !Array.isArray(dummyArticles)) {\n        error.value = \"Gagal memuat data dummy. Periksa nama atau lokasi file 'src/data/articles.js'.\";\n        loading.value = false;\n        return;\n      }\n\n      // Menggunakan parseInt untuk memastikan tipe data ID cocok\n      const foundArticle = dummyArticles.find(a => a.id === parseInt(id));\n      if (foundArticle) {\n        article.value = foundArticle;\n      } else {\n        error.value = `Artikel dengan ID \"${id}\" tidak ditemukan.`;\n      }\n      loading.value = false;\n    };\n\n    // Computed property untuk memformat konten menjadi paragraf HTML\n    const formattedContent = computed(() => {\n      if (!article.value) return '';\n      return article.value.content.split(/\\n\\s*\\n/).map(paragraph => `<p>${paragraph.trim()}</p>`).join('');\n    });\n\n    // Computed property untuk daftar artikel terbaru di sidebar\n    const latestArticles = computed(() => {\n      if (!article.value) return [];\n      // Ambil 4 artikel lain yang bukan artikel yang sedang dibaca\n      return dummyArticles.filter(a => a.id !== article.value.id).slice(0, 4);\n    });\n\n    // Panggil data saat komponen pertama kali dimuat\n    onMounted(() => {\n      fetchArticleData(route.params.id);\n    });\n\n    // Panggil ulang data jika ID di URL berubah (misal: saat klik link di sidebar)\n    watch(() => route.params.id, newId => {\n      if (newId) {\n        fetchArticleData(newId);\n        // Scroll ke atas halaman saat artikel baru dimuat\n        window.scrollTo(0, 0);\n      }\n    });\n    const __returned__ = {\n      route,\n      article,\n      loading,\n      error,\n      fetchArticleData,\n      formattedContent,\n      latestArticles,\n      ref,\n      onMounted,\n      computed,\n      watch,\n      get useRoute() {\n        return useRoute;\n      },\n      get dummyArticles() {\n        return dummyArticles;\n      },\n      get formatDate() {\n        return formatDate;\n      },\n      LatestArticlesSidebar,\n      CommentSection\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","useRoute","dummyArticles","formatDate","LatestArticlesSidebar","CommentSection","route","article","loading","error","fetchArticleData","id","value","Array","isArray","foundArticle","find","a","parseInt","formattedContent","content","split","map","paragraph","trim","join","latestArticles","filter","slice","params","newId","window","scrollTo"],"sources":["E:/ibuhamil/frontend/src/views/article/ArticleDetailView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-container\">\r\n    <div v-if=\"loading\" class=\"state-message\">Memuat artikel...</div>\r\n    <div v-if=\"error\" class=\"state-message error\">{{ error }}</div>\r\n    \r\n    <div v-if=\"article\" class=\"main-layout\">\r\n      <!-- Kolom Konten Utama -->\r\n      <main class=\"main-content\">\r\n        <article>\r\n          <div class=\"article-image-header\">\r\n            <img :src=\"article.image\" :alt=\"article.title\">\r\n          </div>\r\n\r\n          <h1 class=\"article-title\">{{ article.title }}</h1>\r\n          <p class=\"article-meta\">\r\n            Oleh <strong>{{ article.author.name }}</strong> dalam kategori <strong>{{ article.category.name }}</strong>\r\n            <br>\r\n            Dipublikasikan pada {{ formatDate(article.date_posted) }}\r\n          </p>\r\n          \r\n          <div class=\"article-content\" v-html=\"formattedContent\"></div>\r\n        </article>\r\n\r\n        <!-- Komponen Komentar diletakkan di sini -->\r\n        <CommentSection />\r\n      </main>\r\n\r\n      <!-- Kolom Sidebar -->\r\n      <aside class=\"sidebar-content\">\r\n        <LatestArticlesSidebar :articles=\"latestArticles\" />\r\n      </aside>\r\n    </div>\r\n\r\n    <!-- Nanti kita bisa tambahkan bagian \"Rekomendasi Untukmu\" di sini -->\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { dummyArticles } from '@/data/articles.js'; \r\nimport { formatDate } from '@/utils/formatDate';\r\n\r\n// Impor komponen baru yang akan digunakan\r\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\r\nimport CommentSection from '@/components/articles/CommentSection.vue';\r\n\r\nconst route = useRoute();\r\nconst article = ref(null);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\n// Fungsi terpusat untuk mengambil data artikel\r\nconst fetchArticleData = (id) => {\r\n  loading.value = true;\r\n  article.value = null;\r\n  error.value = null;\r\n\r\n  if (!dummyArticles || !Array.isArray(dummyArticles)) {\r\n    error.value = \"Gagal memuat data dummy. Periksa nama atau lokasi file 'src/data/articles.js'.\";\r\n    loading.value = false;\r\n    return;\r\n  }\r\n\r\n  // Menggunakan parseInt untuk memastikan tipe data ID cocok\r\n  const foundArticle = dummyArticles.find(a => a.id === parseInt(id));\r\n\r\n  if (foundArticle) {\r\n    article.value = foundArticle;\r\n  } else {\r\n    error.value = `Artikel dengan ID \"${id}\" tidak ditemukan.`;\r\n  }\r\n  \r\n  loading.value = false;\r\n};\r\n\r\n// Computed property untuk memformat konten menjadi paragraf HTML\r\nconst formattedContent = computed(() => {\r\n  if (!article.value) return '';\r\n  return article.value.content\r\n    .split(/\\n\\s*\\n/)\r\n    .map(paragraph => `<p>${paragraph.trim()}</p>`)\r\n    .join('');\r\n});\r\n\r\n// Computed property untuk daftar artikel terbaru di sidebar\r\nconst latestArticles = computed(() => {\r\n  if (!article.value) return [];\r\n  // Ambil 4 artikel lain yang bukan artikel yang sedang dibaca\r\n  return dummyArticles\r\n    .filter(a => a.id !== article.value.id)\r\n    .slice(0, 4);\r\n});\r\n\r\n// Panggil data saat komponen pertama kali dimuat\r\nonMounted(() => {\r\n  fetchArticleData(route.params.id);\r\n});\r\n\r\n// Panggil ulang data jika ID di URL berubah (misal: saat klik link di sidebar)\r\nwatch(() => route.params.id, (newId) => {\r\n  if (newId) {\r\n    fetchArticleData(newId);\r\n    // Scroll ke atas halaman saat artikel baru dimuat\r\n    window.scrollTo(0, 0);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.page-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n.state-message { text-align: center; padding: 60px; font-size: 1.2em; color: #888; }\r\n.error { color: #c53030; background-color: #fff5f5; border-radius: 8px; }\r\n\r\n.main-layout {\r\n  display: grid;\r\n  grid-template-columns: 2.5fr 1fr; /* Kolom utama lebih besar, sidebar lebih kecil */\r\n  gap: 50px; /* Jarak antara konten utama dan sidebar */\r\n}\r\n\r\n.main-content {\r\n  max-width: 100%;\r\n}\r\n.sidebar-content {\r\n  position: sticky;\r\n  top: 100px; /* Jarak dari atas saat scroll */\r\n  align-self: flex-start; /* Agar sidebar tidak ikut memanjang saat konten utama panjang */\r\n}\r\n\r\n/* --- Style untuk Artikel --- */\r\n.article-image-header img { \r\n  width: 100%; \r\n  aspect-ratio: 16 / 9; \r\n  object-fit: cover; \r\n  border-radius: 12px; \r\n  margin-bottom: 30px;\r\n}\r\n.article-title { \r\n  font-size: 2.8em; \r\n  margin-bottom: 15px; \r\n  line-height: 1.2; \r\n}\r\n.article-meta { \r\n  color: #666; \r\n  font-style: italic; \r\n  margin-bottom: 30px; \r\n  border-bottom: 1px solid #eee; \r\n  padding-bottom: 20px; \r\n}\r\n.article-content { \r\n  line-height: 1.8; \r\n  font-size: 1.1em; \r\n}\r\n.article-content :deep(p) { \r\n  margin-bottom: 1.5em; \r\n}\r\n</style>\r\n"],"mappings":"AAuCA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,KAAK,QAAQ,KAAK;AACrD,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAASC,UAAU,QAAQ,oBAAoB;;AAE/C;AACA,OAAOC,qBAAqB,MAAM,iDAAiD;AACnF,OAAOC,cAAc,MAAM,0CAA0C;;;;;;;IAErE,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;IACxB,MAAMM,OAAO,GAAGV,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMW,OAAO,GAAGX,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMY,KAAK,GAAGZ,GAAG,CAAC,IAAI,CAAC;;IAEvB;IACA,MAAMa,gBAAgB,GAAIC,EAAE,IAAK;MAC/BH,OAAO,CAACI,KAAK,GAAG,IAAI;MACpBL,OAAO,CAACK,KAAK,GAAG,IAAI;MACpBH,KAAK,CAACG,KAAK,GAAG,IAAI;MAElB,IAAI,CAACV,aAAa,IAAI,CAACW,KAAK,CAACC,OAAO,CAACZ,aAAa,CAAC,EAAE;QACnDO,KAAK,CAACG,KAAK,GAAG,gFAAgF;QAC9FJ,OAAO,CAACI,KAAK,GAAG,KAAK;QACrB;MACF;;MAEA;MACA,MAAMG,YAAY,GAAGb,aAAa,CAACc,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKO,QAAQ,CAACP,EAAE,CAAC,CAAC;MAEnE,IAAII,YAAY,EAAE;QAChBR,OAAO,CAACK,KAAK,GAAGG,YAAY;MAC9B,CAAC,MAAM;QACLN,KAAK,CAACG,KAAK,GAAG,sBAAsBD,EAAE,oBAAoB;MAC5D;MAEAH,OAAO,CAACI,KAAK,GAAG,KAAK;IACvB,CAAC;;IAED;IACA,MAAMO,gBAAgB,GAAGpB,QAAQ,CAAC,MAAM;MACtC,IAAI,CAACQ,OAAO,CAACK,KAAK,EAAE,OAAO,EAAE;MAC7B,OAAOL,OAAO,CAACK,KAAK,CAACQ,OAAO,CACzBC,KAAK,CAAC,SAAS,CAAC,CAChBC,GAAG,CAACC,SAAS,IAAI,MAAMA,SAAS,CAACC,IAAI,CAAC,CAAC,MAAM,CAAC,CAC9CC,IAAI,CAAC,EAAE,CAAC;IACb,CAAC,CAAC;;IAEF;IACA,MAAMC,cAAc,GAAG3B,QAAQ,CAAC,MAAM;MACpC,IAAI,CAACQ,OAAO,CAACK,KAAK,EAAE,OAAO,EAAE;MAC7B;MACA,OAAOV,aAAa,CACjByB,MAAM,CAACV,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKJ,OAAO,CAACK,KAAK,CAACD,EAAE,CAAC,CACtCiB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAChB,CAAC,CAAC;;IAEF;IACA9B,SAAS,CAAC,MAAM;MACdY,gBAAgB,CAACJ,KAAK,CAACuB,MAAM,CAAClB,EAAE,CAAC;IACnC,CAAC,CAAC;;IAEF;IACAX,KAAK,CAAC,MAAMM,KAAK,CAACuB,MAAM,CAAClB,EAAE,EAAGmB,KAAK,IAAK;MACtC,IAAIA,KAAK,EAAE;QACTpB,gBAAgB,CAACoB,KAAK,CAAC;QACvB;QACAC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MACvB;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}