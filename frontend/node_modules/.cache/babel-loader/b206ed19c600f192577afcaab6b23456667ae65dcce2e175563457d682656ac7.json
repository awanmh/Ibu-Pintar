{"ast":null,"code":"import { ref, onMounted, computed, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { dummyArticles } from '@/data/articles.js';\nimport { formatDate } from '@/utils/formatDate.js';\n\n// Impor semua komponen yang dibutuhkan\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\nimport CommentSection from '@/components/articles/CommentSection.vue';\nimport RecommendedArticles from '@/components/articles/RecommendedArticles.vue';\nexport default {\n  __name: 'ArticleDetailView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const article = ref(null);\n    const loading = ref(true);\n    const error = ref(null);\n\n    // Fungsi terpusat untuk mengambil data artikel\n    const fetchArticleData = id => {\n      loading.value = true;\n      article.value = null;\n      error.value = null;\n      if (!dummyArticles || !Array.isArray(dummyArticles)) {\n        error.value = \"Gagal memuat data dummy. Periksa nama atau lokasi file 'src/data/articles.js'.\";\n        loading.value = false;\n        return;\n      }\n      const foundArticle = dummyArticles.find(a => a.id === parseInt(id));\n      if (foundArticle) {\n        article.value = foundArticle;\n      } else {\n        error.value = `Artikel dengan ID \"${id}\" tidak ditemukan.`;\n      }\n      loading.value = false;\n    };\n\n    // Computed property untuk memformat konten menjadi paragraf HTML\n    const formattedContent = computed(() => {\n      if (!article.value) return '';\n      return article.value.content.split(/\\n\\s*\\n/).map(paragraph => `<p>${paragraph.trim()}</p>`).join('');\n    });\n\n    // ### LOGIKA DIPERBARUI DI SINI ###\n\n    // Computed property untuk daftar artikel terbaru di sidebar\n    const latestArticles = computed(() => {\n      if (!article.value) return [];\n      // Ambil 2 artikel lain yang bukan artikel yang sedang dibaca untuk sidebar\n      return dummyArticles.filter(a => a.id !== article.value.id).slice(0, 2);\n    });\n\n    // Computed property untuk daftar artikel rekomendasi\n    const recommendedArticles = computed(() => {\n      if (!article.value) return [];\n      // Buat daftar ID artikel yang sudah ditampilkan (di konten utama dan sidebar)\n      const excludedIds = [article.value.id, ...latestArticles.value.map(a => a.id)];\n      // Ambil sisa artikel (maksimal 4) yang belum ditampilkan\n      return dummyArticles.filter(a => !excludedIds.includes(a.id)).slice(0, 4);\n    });\n\n    // Panggil data saat komponen pertama kali dimuat\n    onMounted(() => {\n      fetchArticleData(route.params.id);\n    });\n\n    // Panggil ulang data jika ID di URL berubah (misal: saat klik link di sidebar)\n    watch(() => route.params.id, newId => {\n      if (newId) {\n        fetchArticleData(newId);\n        window.scrollTo(0, 0);\n      }\n    });\n    const __returned__ = {\n      route,\n      article,\n      loading,\n      error,\n      fetchArticleData,\n      formattedContent,\n      latestArticles,\n      recommendedArticles,\n      ref,\n      onMounted,\n      computed,\n      watch,\n      get useRoute() {\n        return useRoute;\n      },\n      get dummyArticles() {\n        return dummyArticles;\n      },\n      get formatDate() {\n        return formatDate;\n      },\n      LatestArticlesSidebar,\n      CommentSection,\n      RecommendedArticles\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","watch","useRoute","dummyArticles","formatDate","LatestArticlesSidebar","CommentSection","RecommendedArticles","route","article","loading","error","fetchArticleData","id","value","Array","isArray","foundArticle","find","a","parseInt","formattedContent","content","split","map","paragraph","trim","join","latestArticles","filter","slice","recommendedArticles","excludedIds","includes","params","newId","window","scrollTo"],"sources":["E:/ibuPintar/frontend/src/views/article/ArticleDetailView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-container\">\r\n    <div v-if=\"loading\" class=\"state-message\">Memuat artikel...</div>\r\n    <div v-if=\"error\" class=\"state-message error\">{{ error }}</div>\r\n    \r\n    <div v-if=\"article\">\r\n      <div class=\"main-layout\">\r\n        <!-- Kolom Konten Utama -->\r\n        <main class=\"main-content\">\r\n          <article>\r\n            <div class=\"article-image-header\">\r\n              <img :src=\"article.image\" :alt=\"article.title\">\r\n            </div>\r\n\r\n            <h1 class=\"article-title\">{{ article.title }}</h1>\r\n            <p class=\"article-meta\">\r\n              Oleh <strong>{{ article.author.name }}</strong> dalam kategori <strong>{{ article.category.name }}</strong>\r\n              <br>\r\n              Dipublikasikan pada {{ formatDate(article.date_posted) }}\r\n            </p>\r\n            \r\n            <div class=\"article-content\" v-html=\"formattedContent\"></div>\r\n          </article>\r\n\r\n          <!-- Komponen Komentar diletakkan di sini -->\r\n          <CommentSection />\r\n        </main>\r\n\r\n        <!-- Kolom Sidebar -->\r\n        <aside class=\"sidebar-content\">\r\n          <LatestArticlesSidebar :articles=\"latestArticles\" />\r\n        </aside>\r\n      </div>\r\n\r\n      <!-- Bagian Rekomendasi diletakkan di sini -->\r\n      <RecommendedArticles :articles=\"recommendedArticles\" />\r\n    </div>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed, watch } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport { dummyArticles } from '@/data/articles.js'; \r\nimport { formatDate } from '@/utils/formatDate.js';\r\n\r\n// Impor semua komponen yang dibutuhkan\r\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\r\nimport CommentSection from '@/components/articles/CommentSection.vue';\r\nimport RecommendedArticles from '@/components/articles/RecommendedArticles.vue';\r\n\r\nconst route = useRoute();\r\nconst article = ref(null);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\n// Fungsi terpusat untuk mengambil data artikel\r\nconst fetchArticleData = (id) => {\r\n  loading.value = true;\r\n  article.value = null;\r\n  error.value = null;\r\n\r\n  if (!dummyArticles || !Array.isArray(dummyArticles)) {\r\n    error.value = \"Gagal memuat data dummy. Periksa nama atau lokasi file 'src/data/articles.js'.\";\r\n    loading.value = false;\r\n    return;\r\n  }\r\n\r\n  const foundArticle = dummyArticles.find(a => a.id === parseInt(id));\r\n\r\n  if (foundArticle) {\r\n    article.value = foundArticle;\r\n  } else {\r\n    error.value = `Artikel dengan ID \"${id}\" tidak ditemukan.`;\r\n  }\r\n  \r\n  loading.value = false;\r\n};\r\n\r\n// Computed property untuk memformat konten menjadi paragraf HTML\r\nconst formattedContent = computed(() => {\r\n  if (!article.value) return '';\r\n  return article.value.content\r\n    .split(/\\n\\s*\\n/)\r\n    .map(paragraph => `<p>${paragraph.trim()}</p>`)\r\n    .join('');\r\n});\r\n\r\n// ### LOGIKA DIPERBARUI DI SINI ###\r\n\r\n// Computed property untuk daftar artikel terbaru di sidebar\r\nconst latestArticles = computed(() => {\r\n  if (!article.value) return [];\r\n  // Ambil 2 artikel lain yang bukan artikel yang sedang dibaca untuk sidebar\r\n  return dummyArticles\r\n    .filter(a => a.id !== article.value.id)\r\n    .slice(0, 2);\r\n});\r\n\r\n// Computed property untuk daftar artikel rekomendasi\r\nconst recommendedArticles = computed(() => {\r\n    if (!article.value) return [];\r\n    // Buat daftar ID artikel yang sudah ditampilkan (di konten utama dan sidebar)\r\n    const excludedIds = [article.value.id, ...latestArticles.value.map(a => a.id)];\r\n    // Ambil sisa artikel (maksimal 4) yang belum ditampilkan\r\n    return dummyArticles\r\n        .filter(a => !excludedIds.includes(a.id))\r\n        .slice(0, 4);\r\n});\r\n\r\n\r\n// Panggil data saat komponen pertama kali dimuat\r\nonMounted(() => {\r\n  fetchArticleData(route.params.id);\r\n});\r\n\r\n// Panggil ulang data jika ID di URL berubah (misal: saat klik link di sidebar)\r\nwatch(() => route.params.id, (newId) => {\r\n  if (newId) {\r\n    fetchArticleData(newId);\r\n    window.scrollTo(0, 0);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.page-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n.state-message { text-align: center; padding: 60px; font-size: 1.2em; color: #888; }\r\n.error { color: #c53030; background-color: #fff5f5; border-radius: 8px; }\r\n\r\n.main-layout {\r\n  display: grid;\r\n  grid-template-columns: 2.5fr 1fr;\r\n  gap: 50px;\r\n}\r\n\r\n.main-content {\r\n  max-width: 100%;\r\n}\r\n.sidebar-content {\r\n  position: sticky;\r\n  top: 100px;\r\n  align-self: flex-start;\r\n}\r\n\r\n.article-image-header img { \r\n  width: 100%; \r\n  aspect-ratio: 16 / 9; \r\n  object-fit: cover; \r\n  border-radius: 12px; \r\n  margin-bottom: 30px;\r\n}\r\n.article-title { \r\n  font-size: 2.8em; \r\n  margin-bottom: 15px; \r\n  line-height: 1.2; \r\n}\r\n.article-meta { \r\n  color: #666; \r\n  font-style: italic; \r\n  margin-bottom: 30px; \r\n  border-bottom: 1px solid #eee; \r\n  padding-bottom: 20px; \r\n}\r\n.article-content { \r\n  line-height: 1.8; \r\n  font-size: 1.1em; \r\n}\r\n.article-content :deep(p) { \r\n  margin-bottom: 1.5em; \r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}