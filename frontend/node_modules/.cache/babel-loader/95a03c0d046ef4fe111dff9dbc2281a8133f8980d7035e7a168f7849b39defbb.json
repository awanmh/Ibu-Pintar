{"ast":null,"code":"import { ref, computed, onMounted, watch } from 'vue';\nimport { useRoute } from 'vue-router';\nimport ApiService from '@/services/ApiService';\nimport { formatDate } from '@/utils/formatDate';\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\nimport CommentSection from '@/components/articles/CommentSection.vue';\nimport RecommendedArticles from '@/components/articles/RecommendedArticles.vue';\nexport default {\n  __name: 'ArticleDetailView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const article = ref(null);\n    const loading = ref(true);\n    const error = ref(null);\n    const latestArticles = ref([]);\n    const recommendedArticles = ref([]);\n    const getFullImageUrl = path => `http://localhost:5000${path}`;\n    const fetchArticle = async id => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const response = await ApiService.getArticle(id);\n        article.value = response.data;\n        await fetchLatestAndRecommended();\n      } catch (err) {\n        error.value = 'Artikel tidak ditemukan atau terjadi kesalahan.';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const fetchLatestAndRecommended = async () => {\n      try {\n        const res = await ApiService.getArticles();\n        const articles = res.data.filter(a => a.id !== article.value.id);\n        latestArticles.value = articles.slice(0, 2);\n        recommendedArticles.value = articles.slice(2, 6);\n      } catch (err) {\n        console.warn('Gagal memuat artikel tambahan.');\n      }\n    };\n    const formattedContent = computed(() => {\n      if (!article.value) return '';\n      return article.value.content.split(/\\n\\s*\\n/).map(p => `<p>${p.trim()}</p>`).join('');\n    });\n    onMounted(() => fetchArticle(route.params.id));\n    watch(() => route.params.id, newId => fetchArticle(newId));\n    const __returned__ = {\n      route,\n      article,\n      loading,\n      error,\n      latestArticles,\n      recommendedArticles,\n      getFullImageUrl,\n      fetchArticle,\n      fetchLatestAndRecommended,\n      formattedContent,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      get useRoute() {\n        return useRoute;\n      },\n      get ApiService() {\n        return ApiService;\n      },\n      get formatDate() {\n        return formatDate;\n      },\n      LatestArticlesSidebar,\n      CommentSection,\n      RecommendedArticles\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","useRoute","ApiService","formatDate","LatestArticlesSidebar","CommentSection","RecommendedArticles","route","article","loading","error","latestArticles","recommendedArticles","getFullImageUrl","path","fetchArticle","id","value","response","getArticle","data","fetchLatestAndRecommended","err","res","getArticles","articles","filter","a","slice","console","warn","formattedContent","content","split","map","p","trim","join","params","newId"],"sources":["E:/ibuPintar/frontend/src/views/article/ArticleDetailView.vue"],"sourcesContent":["// === File: src/views/ArticleDetailView.vue ===\r\n<template>\r\n  <div class=\"page-container\">\r\n    <div v-if=\"loading\" class=\"state-message\">Memuat artikel...</div>\r\n    <div v-if=\"error\" class=\"state-message error\">{{ error }}</div>\r\n\r\n    <div v-if=\"article\">\r\n      <div class=\"main-layout\">\r\n        <main class=\"main-content\">\r\n          <article>\r\n            <div class=\"article-image-header\">\r\n              <img :src=\"getFullImageUrl(article.imageUrl)\" :alt=\"article.title\">\r\n            </div>\r\n            <h1 class=\"article-title\">{{ article.title }}</h1>\r\n            <p class=\"article-meta\">\r\n              Oleh <strong>{{ article.author.name }}</strong> dalam kategori <strong>{{ article.category.name }}</strong><br>\r\n              Dipublikasikan pada {{ formatDate(article.date_posted) }}\r\n            </p>\r\n            <div class=\"article-content\" v-html=\"formattedContent\"></div>\r\n          </article>\r\n          <CommentSection />\r\n        </main>\r\n        <aside class=\"sidebar-content\">\r\n          <LatestArticlesSidebar :articles=\"latestArticles\" />\r\n        </aside>\r\n      </div>\r\n      <RecommendedArticles :articles=\"recommendedArticles\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport ApiService from '@/services/ApiService';\r\nimport { formatDate } from '@/utils/formatDate';\r\nimport LatestArticlesSidebar from '@/components/articles/LatestArticlesSidebar.vue';\r\nimport CommentSection from '@/components/articles/CommentSection.vue';\r\nimport RecommendedArticles from '@/components/articles/RecommendedArticles.vue';\r\n\r\nconst route = useRoute();\r\nconst article = ref(null);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\nconst latestArticles = ref([]);\r\nconst recommendedArticles = ref([]);\r\n\r\nconst getFullImageUrl = (path) => `http://localhost:5000${path}`;\r\n\r\nconst fetchArticle = async (id) => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const response = await ApiService.getArticle(id);\r\n    article.value = response.data;\r\n    await fetchLatestAndRecommended();\r\n  } catch (err) {\r\n    error.value = 'Artikel tidak ditemukan atau terjadi kesalahan.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst fetchLatestAndRecommended = async () => {\r\n  try {\r\n    const res = await ApiService.getArticles();\r\n    const articles = res.data.filter(a => a.id !== article.value.id);\r\n    latestArticles.value = articles.slice(0, 2);\r\n    recommendedArticles.value = articles.slice(2, 6);\r\n  } catch (err) {\r\n    console.warn('Gagal memuat artikel tambahan.');\r\n  }\r\n};\r\n\r\nconst formattedContent = computed(() => {\r\n  if (!article.value) return '';\r\n  return article.value.content\r\n    .split(/\\n\\s*\\n/)\r\n    .map(p => `<p>${p.trim()}</p>`)\r\n    .join('');\r\n});\r\n\r\nonMounted(() => fetchArticle(route.params.id));\r\nwatch(() => route.params.id, (newId) => fetchArticle(newId));\r\n</script>\r\n\r\n<style scoped>\r\n.page-container {\r\n  max-width: 1200px;\r\n  margin: 40px auto;\r\n  padding: 0 20px;\r\n}\r\n.state-message {\r\n  text-align: center;\r\n  padding: 60px;\r\n  font-size: 1.2em;\r\n  color: #888;\r\n}\r\n.error {\r\n  color: #c53030;\r\n  background-color: #fff5f5;\r\n  border-radius: 8px;\r\n}\r\n.main-layout {\r\n  display: grid;\r\n  grid-template-columns: 2.5fr 1fr;\r\n  gap: 50px;\r\n}\r\n.main-content {\r\n  max-width: 100%;\r\n}\r\n.sidebar-content {\r\n  position: sticky;\r\n  top: 100px;\r\n  align-self: flex-start;\r\n}\r\n.article-image-header img {\r\n  width: 100%;\r\n  aspect-ratio: 16 / 9;\r\n  object-fit: cover;\r\n  border-radius: 12px;\r\n  margin-bottom: 30px;\r\n}\r\n.article-title {\r\n  font-size: 2.8em;\r\n  margin-bottom: 15px;\r\n  line-height: 1.2;\r\n}\r\n.article-meta {\r\n  color: #666;\r\n  font-style: italic;\r\n  margin-bottom: 30px;\r\n  border-bottom: 1px solid #eee;\r\n  padding-bottom: 20px;\r\n}\r\n.article-content {\r\n  line-height: 1.8;\r\n  font-size: 1.1em;\r\n}\r\n.article-content :deep(p) {\r\n  margin-bottom: 1.5em;\r\n}\r\n</style>\r\n"],"mappings":"AAgCA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,KAAK,QAAQ,KAAK;AACrD,SAASC,QAAQ,QAAQ,YAAY;AACrC,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,OAAOC,qBAAqB,MAAM,iDAAiD;AACnF,OAAOC,cAAc,MAAM,0CAA0C;AACrE,OAAOC,mBAAmB,MAAM,+CAA+C;;;;;;;IAE/E,MAAMC,KAAK,GAAGN,QAAQ,CAAC,CAAC;IACxB,MAAMO,OAAO,GAAGX,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMY,OAAO,GAAGZ,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMa,KAAK,GAAGb,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMc,cAAc,GAAGd,GAAG,CAAC,EAAE,CAAC;IAC9B,MAAMe,mBAAmB,GAAGf,GAAG,CAAC,EAAE,CAAC;IAEnC,MAAMgB,eAAe,GAAIC,IAAI,IAAK,wBAAwBA,IAAI,EAAE;IAEhE,MAAMC,YAAY,GAAG,MAAOC,EAAE,IAAK;MACjCP,OAAO,CAACQ,KAAK,GAAG,IAAI;MACpBP,KAAK,CAACO,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMhB,UAAU,CAACiB,UAAU,CAACH,EAAE,CAAC;QAChDR,OAAO,CAACS,KAAK,GAAGC,QAAQ,CAACE,IAAI;QAC7B,MAAMC,yBAAyB,CAAC,CAAC;MACnC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZZ,KAAK,CAACO,KAAK,GAAG,iDAAiD;MACjE,CAAC,SAAS;QACRR,OAAO,CAACQ,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAED,MAAMI,yBAAyB,GAAG,MAAAA,CAAA,KAAY;MAC5C,IAAI;QACF,MAAME,GAAG,GAAG,MAAMrB,UAAU,CAACsB,WAAW,CAAC,CAAC;QAC1C,MAAMC,QAAQ,GAAGF,GAAG,CAACH,IAAI,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACX,EAAE,KAAKR,OAAO,CAACS,KAAK,CAACD,EAAE,CAAC;QAChEL,cAAc,CAACM,KAAK,GAAGQ,QAAQ,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAC3ChB,mBAAmB,CAACK,KAAK,GAAGQ,QAAQ,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;MAClD,CAAC,CAAC,OAAON,GAAG,EAAE;QACZO,OAAO,CAACC,IAAI,CAAC,gCAAgC,CAAC;MAChD;IACF,CAAC;IAED,MAAMC,gBAAgB,GAAGjC,QAAQ,CAAC,MAAM;MACtC,IAAI,CAACU,OAAO,CAACS,KAAK,EAAE,OAAO,EAAE;MAC7B,OAAOT,OAAO,CAACS,KAAK,CAACe,OAAO,CACzBC,KAAK,CAAC,SAAS,CAAC,CAChBC,GAAG,CAACC,CAAC,IAAI,MAAMA,CAAC,CAACC,IAAI,CAAC,CAAC,MAAM,CAAC,CAC9BC,IAAI,CAAC,EAAE,CAAC;IACb,CAAC,CAAC;IAEFtC,SAAS,CAAC,MAAMgB,YAAY,CAACR,KAAK,CAAC+B,MAAM,CAACtB,EAAE,CAAC,CAAC;IAC9ChB,KAAK,CAAC,MAAMO,KAAK,CAAC+B,MAAM,CAACtB,EAAE,EAAGuB,KAAK,IAAKxB,YAAY,CAACwB,KAAK,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}