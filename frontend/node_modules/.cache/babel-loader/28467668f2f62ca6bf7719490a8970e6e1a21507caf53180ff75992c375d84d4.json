{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport ArticleCard from '@/components/articles/ArticleCard.vue';\nimport ApiService from '@/services/ApiService'; // Impor ApiService\n\nexport default {\n  __name: 'ArticlesView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const allArticles = computed(() => store.getters['articles/allArticles']);\n    const status = computed(() => store.state.articles.status);\n\n    // --- State untuk Kategori ---\n    const categories = ref([]);\n    const activeCategoryId = ref(null); // null berarti \"Semua\"\n\n    // --- Computed Property untuk memfilter artikel ---\n    const filteredArticles = computed(() => {\n      if (activeCategoryId.value === null) {\n        return allArticles.value; // Tampilkan semua jika tidak ada filter\n      }\n      return allArticles.value.filter(article => article.category.id === activeCategoryId.value);\n    });\n\n    // --- Logika baru untuk membagi artikel dari data yang sudah difilter ---\n    const mainArticle = computed(() => filteredArticles.value[0] || null);\n    const sideArticles = computed(() => filteredArticles.value.slice(1, 4));\n    const remainingArticles = computed(() => filteredArticles.value.slice(4));\n\n    // --- Fungsi untuk memilih kategori ---\n    const selectCategory = id => {\n      activeCategoryId.value = id;\n    };\n\n    // --- onMounted untuk mengambil semua data yang diperlukan ---\n    onMounted(async () => {\n      store.dispatch('articles/fetchArticles');\n      try {\n        const response = await ApiService.getCategories();\n        categories.value = response.data;\n      } catch (error) {\n        console.error(\"Gagal mengambil data kategori:\", error);\n      }\n\n      // Logic animasi yang sudah ada\n      const observer = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            entry.target.classList.add('is-visible');\n            observer.unobserve(entry.target);\n          }\n        });\n      }, {\n        threshold: 0.1\n      });\n      setTimeout(() => {\n        document.querySelectorAll('.animate-card').forEach(el => {\n          observer.observe(el);\n        });\n      }, 100);\n    });\n    const __returned__ = {\n      store,\n      allArticles,\n      status,\n      categories,\n      activeCategoryId,\n      filteredArticles,\n      mainArticle,\n      sideArticles,\n      remainingArticles,\n      selectCategory,\n      ref,\n      computed,\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      ArticleCard,\n      get ApiService() {\n        return ApiService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","ArticleCard","ApiService","store","allArticles","getters","status","state","articles","categories","activeCategoryId","filteredArticles","value","filter","article","category","id","mainArticle","sideArticles","slice","remainingArticles","selectCategory","dispatch","response","getCategories","data","error","console","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","target","classList","add","unobserve","threshold","setTimeout","document","querySelectorAll","el","observe"],"sources":["E:/ibuhamil/frontend/src/views/article/ArticlesView.vue"],"sourcesContent":["<template>\r\n  <div class=\"articles-view\">\r\n    <!-- Header Halaman -->\r\n    <section class=\"page-header\">\r\n      <div class=\"container\">\r\n        <h1>Semua Artikel</h1>\r\n        <p>Temukan informasi dan tips terbaru seputar dunia kehamilan.</p>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- ### BAGIAN BARU: MENU KATEGORI ### -->\r\n    <div class=\"category-filter-container\">\r\n        <div class=\"container\">\r\n            <div class=\"category-filter\">\r\n                <button \r\n                    @click=\"selectCategory(null)\" \r\n                    :class=\"{ active: activeCategoryId === null }\"\r\n                >\r\n                    Semua\r\n                </button>\r\n                <button \r\n                    v-for=\"category in categories\" \r\n                    :key=\"category.id\" \r\n                    @click=\"selectCategory(category.id)\"\r\n                    :class=\"{ active: activeCategoryId === category.id }\"\r\n                >\r\n                    {{ category.name }}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Konten Utama -->\r\n    <main class=\"container content-area\">\r\n      <div v-if=\"status === 'loading'\" class=\"loading\">Memuat artikel...</div>\r\n      <div v-if=\"status === 'error'\" class=\"error\">Gagal memuat artikel. Silakan coba lagi nanti.</div>\r\n\r\n      <div v-if=\"status === 'success' && filteredArticles.length > 0\">\r\n        <!-- Bagian Atas: Hero & Artikel Pendamping -->\r\n        <div class=\"top-section-grid\">\r\n          <div class=\"hero-article animate-card\">\r\n            <ArticleCard :article=\"mainArticle\" :is-hero=\"true\" />\r\n          </div>\r\n          <div class=\"side-articles\">\r\n            <div \r\n              v-for=\"(article, index) in sideArticles\" \r\n              :key=\"article.id\"\r\n              class=\"animate-card\"\r\n              :style=\"{ 'transition-delay': `${index * 100}ms` }\"\r\n            >\r\n              <ArticleCard \r\n                :article=\"article\"\r\n                :is-side=\"true\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Bagian Bawah: Grid Artikel Lainnya -->\r\n        <div class=\"more-articles-section\">\r\n          <h2 class=\"section-title animate-card\">Artikel Lainnya</h2>\r\n          <div class=\"more-articles-grid\">\r\n            <div\r\n              v-for=\"(article, index) in remainingArticles\" \r\n              :key=\"article.id\"\r\n              class=\"animate-card\"\r\n              :style=\"{ 'transition-delay': `${index * 100}ms` }\"\r\n            >\r\n              <ArticleCard :article=\"article\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div v-else-if=\"status === 'success' && filteredArticles.length === 0\" class=\"empty-state\">\r\n          <p>Tidak ada artikel dalam kategori ini.</p>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport ArticleCard from '@/components/articles/ArticleCard.vue';\r\nimport ApiService from '@/services/ApiService'; // Impor ApiService\r\n\r\nconst store = useStore();\r\n\r\nconst allArticles = computed(() => store.getters['articles/allArticles']);\r\nconst status = computed(() => store.state.articles.status);\r\n\r\n// --- State untuk Kategori ---\r\nconst categories = ref([]);\r\nconst activeCategoryId = ref(null); // null berarti \"Semua\"\r\n\r\n// --- Computed Property untuk memfilter artikel ---\r\nconst filteredArticles = computed(() => {\r\n    if (activeCategoryId.value === null) {\r\n        return allArticles.value; // Tampilkan semua jika tidak ada filter\r\n    }\r\n    return allArticles.value.filter(article => article.category.id === activeCategoryId.value);\r\n});\r\n\r\n// --- Logika baru untuk membagi artikel dari data yang sudah difilter ---\r\nconst mainArticle = computed(() => filteredArticles.value[0] || null);\r\nconst sideArticles = computed(() => filteredArticles.value.slice(1, 4));\r\nconst remainingArticles = computed(() => filteredArticles.value.slice(4));\r\n\r\n// --- Fungsi untuk memilih kategori ---\r\nconst selectCategory = (id) => {\r\n    activeCategoryId.value = id;\r\n};\r\n\r\n// --- onMounted untuk mengambil semua data yang diperlukan ---\r\nonMounted(async () => {\r\n  store.dispatch('articles/fetchArticles');\r\n\r\n  try {\r\n    const response = await ApiService.getCategories();\r\n    categories.value = response.data;\r\n  } catch(error) {\r\n    console.error(\"Gagal mengambil data kategori:\", error);\r\n  }\r\n\r\n  // Logic animasi yang sudah ada\r\n  const observer = new IntersectionObserver((entries) => {\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        entry.target.classList.add('is-visible');\r\n        observer.unobserve(entry.target);\r\n      }\r\n    });\r\n  }, { threshold: 0.1 });\r\n\r\n  setTimeout(() => {\r\n    document.querySelectorAll('.animate-card').forEach((el) => {\r\n        observer.observe(el);\r\n    });\r\n  }, 100);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Animasi */\r\n.animate-card { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }\r\n.animate-card.is-visible { opacity: 1; transform: translateY(0); }\r\n\r\n/* Layout Umum */\r\n.articles-view { background-color: #f8f9fa; }\r\n.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }\r\n.content-area { padding-top: 40px; }\r\n\r\n/* Header Halaman */\r\n.page-header { padding: 60px 0; background: linear-gradient(135deg, #fff0f5 0%, #e6e6fa 100%); text-align: center; }\r\n.page-header h1 { font-size: 3em; color: #4a4a4a; }\r\n.page-header p { font-size: 1.2em; color: #6c757d; margin-top: 10px; }\r\n\r\n/* ### STYLE BARU: MENU KATEGORI ### */\r\n.category-filter-container {\r\n    background-color: #ffffff;\r\n    padding: 15px 0;\r\n    border-bottom: 1px solid #e9ecef;\r\n    position: sticky;\r\n    top: 83px; /* Sesuaikan dengan tinggi navbar Anda */\r\n    z-index: 900;\r\n}\r\n.category-filter {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 15px;\r\n    overflow-x: auto; /* Agar bisa scroll di HP */\r\n}\r\n.category-filter button {\r\n    background: none;\r\n    border: none;\r\n    padding: 10px 20px;\r\n    font-size: 1rem;\r\n    font-weight: 600;\r\n    color: #6c757d;\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    border-radius: 999px;\r\n    white-space: nowrap;\r\n}\r\n.category-filter button:hover {\r\n    background-color: #fce4ec;\r\n    color: #c2185b;\r\n}\r\n.category-filter button.active {\r\n    background-color: #c2185b;\r\n    color: white;\r\n}\r\n/* ---------------------------------- */\r\n\r\n/* Loading & Error States */\r\n.loading, .error, .empty-state { text-align: center; padding: 80px 20px; font-size: 1.2em; color: #888; }\r\n\r\n/* Layout Grid Artikel */\r\n.top-section-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; margin-bottom: 60px; }\r\n.side-articles { display: flex; flex-direction: column; gap: 25px; }\r\n.more-articles-section { margin-top: 40px; padding-top: 40px; border-top: 1px solid #e9ecef; }\r\n.section-title { font-size: 2em; color: #343a40; margin-bottom: 30px; }\r\n.more-articles-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }\r\n</style>\r\n"],"mappings":"AAkFA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,QAAQ,QAAQ,MAAM;AAC/B,OAAOC,WAAW,MAAM,uCAAuC;AAC/D,OAAOC,UAAU,MAAM,uBAAuB,CAAC,CAAC;;;;;;;;IAEhD,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IAExB,MAAMI,WAAW,GAAGN,QAAQ,CAAC,MAAMK,KAAK,CAACE,OAAO,CAAC,sBAAsB,CAAC,CAAC;IACzE,MAAMC,MAAM,GAAGR,QAAQ,CAAC,MAAMK,KAAK,CAACI,KAAK,CAACC,QAAQ,CAACF,MAAM,CAAC;;IAE1D;IACA,MAAMG,UAAU,GAAGZ,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMa,gBAAgB,GAAGb,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEpC;IACA,MAAMc,gBAAgB,GAAGb,QAAQ,CAAC,MAAM;MACpC,IAAIY,gBAAgB,CAACE,KAAK,KAAK,IAAI,EAAE;QACjC,OAAOR,WAAW,CAACQ,KAAK,CAAC,CAAC;MAC9B;MACA,OAAOR,WAAW,CAACQ,KAAK,CAACC,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACC,QAAQ,CAACC,EAAE,KAAKN,gBAAgB,CAACE,KAAK,CAAC;IAC9F,CAAC,CAAC;;IAEF;IACA,MAAMK,WAAW,GAAGnB,QAAQ,CAAC,MAAMa,gBAAgB,CAACC,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;IACrE,MAAMM,YAAY,GAAGpB,QAAQ,CAAC,MAAMa,gBAAgB,CAACC,KAAK,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACvE,MAAMC,iBAAiB,GAAGtB,QAAQ,CAAC,MAAMa,gBAAgB,CAACC,KAAK,CAACO,KAAK,CAAC,CAAC,CAAC,CAAC;;IAEzE;IACA,MAAME,cAAc,GAAIL,EAAE,IAAK;MAC3BN,gBAAgB,CAACE,KAAK,GAAGI,EAAE;IAC/B,CAAC;;IAED;IACAjB,SAAS,CAAC,YAAY;MACpBI,KAAK,CAACmB,QAAQ,CAAC,wBAAwB,CAAC;MAExC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMrB,UAAU,CAACsB,aAAa,CAAC,CAAC;QACjDf,UAAU,CAACG,KAAK,GAAGW,QAAQ,CAACE,IAAI;MAClC,CAAC,CAAC,OAAMC,KAAK,EAAE;QACbC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;;MAEA;MACA,MAAME,QAAQ,GAAG,IAAIC,oBAAoB,CAAEC,OAAO,IAAK;QACrDA,OAAO,CAACC,OAAO,CAAEC,KAAK,IAAK;UACzB,IAAIA,KAAK,CAACC,cAAc,EAAE;YACxBD,KAAK,CAACE,MAAM,CAACC,SAAS,CAACC,GAAG,CAAC,YAAY,CAAC;YACxCR,QAAQ,CAACS,SAAS,CAACL,KAAK,CAACE,MAAM,CAAC;UAClC;QACF,CAAC,CAAC;MACJ,CAAC,EAAE;QAAEI,SAAS,EAAE;MAAI,CAAC,CAAC;MAEtBC,UAAU,CAAC,MAAM;QACfC,QAAQ,CAACC,gBAAgB,CAAC,eAAe,CAAC,CAACV,OAAO,CAAEW,EAAE,IAAK;UACvDd,QAAQ,CAACe,OAAO,CAACD,EAAE,CAAC;QACxB,CAAC,CAAC;MACJ,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}