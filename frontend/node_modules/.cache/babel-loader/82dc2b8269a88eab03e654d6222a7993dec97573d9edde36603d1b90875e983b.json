{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport ApiService from '@/services/ApiService';\nimport AppButton from '@/components/common/AppButton.vue';\nexport default {\n  __name: 'ArticleForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const store = useStore();\n    const article = ref({\n      title: '',\n      content: '',\n      imageUrl: '',\n      category_id: ''\n    });\n    const categories = ref([]);\n    const isEditing = computed(() => !!route.params.id);\n    onMounted(async () => {\n      // Ambil daftar kategori untuk dropdown\n      try {\n        const catResponse = await ApiService.getCategories();\n        categories.value = catResponse.data;\n      } catch (error) {\n        console.error(\"Gagal mengambil kategori:\", error);\n      }\n\n      // Jika ini mode edit, ambil data artikel yang ada\n      if (isEditing.value) {\n        try {\n          const artResponse = await ApiService.getArticle(route.params.id);\n          article.value = artResponse.data;\n        } catch (error) {\n          console.error(\"Gagal mengambil artikel untuk diedit:\", error);\n        }\n      }\n    });\n    const handleSubmit = async () => {\n      // Ambil user_id dari user yang sedang login (admin)\n      const author_id = store.getters['auth/currentUser']?.id;\n      if (!author_id) {\n        alert(\"Sesi admin tidak valid. Silakan login ulang.\");\n        return;\n      }\n      const payload = {\n        ...article.value,\n        author_id\n      };\n      try {\n        if (isEditing.value) {\n          // Panggil API update\n          await ApiService.updateArticle(route.params.id, payload);\n        } else {\n          // Panggil API create\n          await ApiService.createArticle(payload);\n        }\n        // Arahkan kembali ke halaman manajemen artikel setelah berhasil\n        router.push('/admin/articles');\n      } catch (error) {\n        console.error(\"Gagal menyimpan artikel:\", error);\n        alert(\"Terjadi kesalahan saat menyimpan artikel.\");\n      }\n    };\n    const __returned__ = {\n      route,\n      router,\n      store,\n      article,\n      categories,\n      isEditing,\n      handleSubmit,\n      ref,\n      onMounted,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get ApiService() {\n        return ApiService;\n      },\n      AppButton\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","useRoute","useRouter","useStore","ApiService","AppButton","route","router","store","article","title","content","imageUrl","category_id","categories","isEditing","params","id","catResponse","getCategories","value","data","error","console","artResponse","getArticle","handleSubmit","author_id","getters","alert","payload","updateArticle","createArticle","push"],"sources":["E:/ibuPintar/frontend/src/views/admin/ArticleForm.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>{{ isEditing ? 'Edit Artikel' : 'Tambah Artikel Baru' }}</h1>\r\n    <form @submit.prevent=\"handleSubmit\" class=\"article-form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"title\">Judul Artikel</label>\r\n        <input type=\"text\" id=\"title\" v-model=\"article.title\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"imageUrl\">URL Gambar</label>\r\n        <input type=\"text\" id=\"imageUrl\" v-model=\"article.imageUrl\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"category\">Kategori</label>\r\n        <select id=\"category\" v-model=\"article.category_id\" required>\r\n          <option disabled value=\"\">Pilih kategori...</option>\r\n          <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">\r\n            {{ cat.name }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"content\">Konten</label>\r\n        <textarea id=\"content\" v-model=\"article.content\" rows=\"15\" required></textarea>\r\n      </div>\r\n      <AppButton type=\"submit\" variant=\"primary\">\r\n        {{ isEditing ? 'Simpan Perubahan' : 'Publikasikan Artikel' }}\r\n      </AppButton>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport ApiService from '@/services/ApiService';\r\nimport AppButton from '@/components/common/AppButton.vue';\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst article = ref({\r\n  title: '',\r\n  content: '',\r\n  imageUrl: '',\r\n  category_id: '',\r\n});\r\nconst categories = ref([]);\r\nconst isEditing = computed(() => !!route.params.id);\r\n\r\nonMounted(async () => {\r\n  // Ambil daftar kategori untuk dropdown\r\n  try {\r\n    const catResponse = await ApiService.getCategories();\r\n    categories.value = catResponse.data;\r\n  } catch (error) {\r\n    console.error(\"Gagal mengambil kategori:\", error);\r\n  }\r\n\r\n  // Jika ini mode edit, ambil data artikel yang ada\r\n  if (isEditing.value) {\r\n    try {\r\n      const artResponse = await ApiService.getArticle(route.params.id);\r\n      article.value = artResponse.data;\r\n    } catch (error) {\r\n      console.error(\"Gagal mengambil artikel untuk diedit:\", error);\r\n    }\r\n  }\r\n});\r\n\r\nconst handleSubmit = async () => {\r\n  // Ambil user_id dari user yang sedang login (admin)\r\n  const author_id = store.getters['auth/currentUser']?.id;\r\n  if (!author_id) {\r\n    alert(\"Sesi admin tidak valid. Silakan login ulang.\");\r\n    return;\r\n  }\r\n\r\n  const payload = { ...article.value, author_id };\r\n\r\n  try {\r\n    if (isEditing.value) {\r\n      // Panggil API update\r\n      await ApiService.updateArticle(route.params.id, payload);\r\n    } else {\r\n      // Panggil API create\r\n      await ApiService.createArticle(payload);\r\n    }\r\n    // Arahkan kembali ke halaman manajemen artikel setelah berhasil\r\n    router.push('/admin/articles');\r\n  } catch (error) {\r\n    console.error(\"Gagal menyimpan artikel:\", error);\r\n    alert(\"Terjadi kesalahan saat menyimpan artikel.\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.article-form {\r\n  background: white;\r\n  padding: 25px;\r\n  border-radius: 8px;\r\n}\r\n.form-group {\r\n  margin-bottom: 20px;\r\n}\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: 600;\r\n}\r\n.form-group input,\r\n.form-group select,\r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n}\r\ntextarea {\r\n  min-height: 200px;\r\n  resize: vertical;\r\n}\r\n</style>"],"mappings":"AAiCA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,SAASC,QAAQ,QAAQ,MAAM;AAC/B,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,OAAOC,SAAS,MAAM,mCAAmC;;;;;;;IAEzD,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;IACxB,MAAMM,MAAM,GAAGL,SAAS,CAAC,CAAC;IAC1B,MAAMM,KAAK,GAAGL,QAAQ,CAAC,CAAC;IAExB,MAAMM,OAAO,GAAGX,GAAG,CAAC;MAClBY,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE;IACf,CAAC,CAAC;IACF,MAAMC,UAAU,GAAGhB,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMiB,SAAS,GAAGf,QAAQ,CAAC,MAAM,CAAC,CAACM,KAAK,CAACU,MAAM,CAACC,EAAE,CAAC;IAEnDlB,SAAS,CAAC,YAAY;MACpB;MACA,IAAI;QACF,MAAMmB,WAAW,GAAG,MAAMd,UAAU,CAACe,aAAa,CAAC,CAAC;QACpDL,UAAU,CAACM,KAAK,GAAGF,WAAW,CAACG,IAAI;MACrC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;;MAEA;MACA,IAAIP,SAAS,CAACK,KAAK,EAAE;QACnB,IAAI;UACF,MAAMI,WAAW,GAAG,MAAMpB,UAAU,CAACqB,UAAU,CAACnB,KAAK,CAACU,MAAM,CAACC,EAAE,CAAC;UAChER,OAAO,CAACW,KAAK,GAAGI,WAAW,CAACH,IAAI;QAClC,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;QAC/D;MACF;IACF,CAAC,CAAC;IAEF,MAAMI,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B;MACA,MAAMC,SAAS,GAAGnB,KAAK,CAACoB,OAAO,CAAC,kBAAkB,CAAC,EAAEX,EAAE;MACvD,IAAI,CAACU,SAAS,EAAE;QACdE,KAAK,CAAC,8CAA8C,CAAC;QACrD;MACF;MAEA,MAAMC,OAAO,GAAG;QAAE,GAAGrB,OAAO,CAACW,KAAK;QAAEO;MAAU,CAAC;MAE/C,IAAI;QACF,IAAIZ,SAAS,CAACK,KAAK,EAAE;UACnB;UACA,MAAMhB,UAAU,CAAC2B,aAAa,CAACzB,KAAK,CAACU,MAAM,CAACC,EAAE,EAAEa,OAAO,CAAC;QAC1D,CAAC,MAAM;UACL;UACA,MAAM1B,UAAU,CAAC4B,aAAa,CAACF,OAAO,CAAC;QACzC;QACA;QACAvB,MAAM,CAAC0B,IAAI,CAAC,iBAAiB,CAAC;MAChC,CAAC,CAAC,OAAOX,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDO,KAAK,CAAC,2CAA2C,CAAC;MACpD;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}