{"ast":null,"code":"// src/router/index.js\nimport { createRouter, createWebHistory } from 'vue-router';\nimport store from '@/store';\n\n// Impor komponen View Anda\nconst HomeView = () => import('@/views/home/HomeView.vue');\nconst ArticlesView = () => import('@/views/article/ArticlesView.vue'); // Assuming this is the correct name for article list view\nconst ArticleDetailView = () => import('@/views/article/ArticleDetailView.vue');\nconst AboutView = () => import('@/views/about/AboutView.vue');\nconst NotFoundView = () => import('@/views/error/NotFoundView.vue');\nconst ServicesView = () => import('@/views/service/ServicesView.vue');\nconst ServiceDetailView = () => import('@/views/service/ServiceDetailView.vue');\nconst ReservationView = () => import('@/views/reservation/ReservationView.vue');\nconst RegisterView = () => import('@/views/auth/RegisterView.vue');\nconst LoginView = () => import('@/views/auth/LoginView.vue');\n\n// Impor view admin\nconst AdminLayout = () => import('@/views/admin/AdminLayout.vue');\nconst DashboardView = () => import('@/views/admin/DashboardView.vue');\nconst ManageArticles = () => import('@/views/admin/ManageArticles.vue');\n\n// --- PASTIKAN VIEW BARU DI-IMPOR DI SINI ---\nconst ForumView = () => import('@/views/QnA/ForumView.vue');\nconst QuestionDetailView = () => import('@/views/QnA/QuestionDetailView.vue');\nconst AskQuestionView = () => import('@/views/QnA/AskQuestionView.vue');\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: HomeView\n},\n// Articles Routes - Combined and corrected\n{\n  path: '/articles',\n  name: 'Articles',\n  component: ArticlesView\n}, {\n  path: '/articles/:id',\n  // Here, ':id' will capture the slug for ArticleDetailView\n  name: 'ArticleDetail',\n  component: ArticleDetailView,\n  props: true // Passes route params as props. Keep this if your ArticleDetailView uses props for 'id'/'slug'\n}, {\n  path: '/layanan',\n  name: 'Services',\n  component: ServicesView\n}, {\n  path: '/layanan/:slug',\n  name: 'ServiceDetail',\n  component: ServiceDetailView\n}, {\n  path: '/reservasi',\n  name: 'Reservation',\n  component: ReservationView\n}, {\n  path: '/about',\n  name: 'About',\n  component: AboutView\n},\n// Forum (Tanya Bidan) Routes\n{\n  path: '/tanya-bidan',\n  name: 'Forum',\n  component: ForumView\n}, {\n  path: '/tanya-bidan/tanya',\n  // Rute untuk form bertanya\n  name: 'AskQuestion',\n  component: AskQuestionView\n}, {\n  path: '/tanya-bidan/:id',\n  // Rute untuk detail pertanyaan, assuming 'id' captures the question ID/slug\n  name: 'QuestionDetail',\n  component: QuestionDetailView\n},\n// Catch-all 404 route - should always be the last route\n{\n  path: '/:pathMatch(.*)*',\n  name: 'NotFound',\n  component: NotFoundView\n},\n// Registrasi\n{\n  path: '/register',\n  name: 'Register',\n  component: RegisterView\n},\n// Login\n{\n  path: '/login',\n  name: 'Login',\n  component: LoginView\n},\n// Rute Admin (dengan layout khusus)\n{\n  path: '/admin',\n  component: AdminLayout,\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  },\n  // Penanda rute admin\n  children: [{\n    path: '',\n    redirect: '/admin/dashboard'\n  },\n  // Redirect /admin ke /admin/dashboard\n  {\n    path: 'dashboard',\n    name: 'AdminDashboard',\n    component: DashboardView\n  }, {\n    path: 'articles',\n    name: 'ManageArticles',\n    component: ManageArticles\n  }\n  // Tambahkan rute admin lain di sini\n  ]\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n  scrollBehavior() {\n    return {\n      top: 0\n    };\n  }\n});\n\n// ### NAVIGATION GUARD - SANGAT PENTING ###\n// Fungsi ini akan berjalan sebelum setiap navigasi\nrouter.beforeEach((to, from, next) => {\n  const isLoggedIn = store.getters['auth/isLoggedIn'];\n  const isAdmin = store.getters['auth/isAdmin'];\n\n  // Cek apakah rute memerlukan otentikasi\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!isLoggedIn) {\n      // Jika belum login, redirect ke halaman login\n      next({\n        name: 'Login'\n      });\n    } else {\n      // Jika sudah login, cek apakah perlu peran admin\n      if (to.matched.some(record => record.meta.requiresAdmin)) {\n        if (isAdmin) {\n          next(); // Izinkan akses jika admin\n        } else {\n          next({\n            name: 'Home'\n          }); // Jika bukan admin, redirect ke beranda\n        }\n      } else {\n        next(); // Izinkan akses jika tidak perlu peran admin\n      }\n    }\n  } else {\n    next(); // Selalu izinkan akses ke rute publik\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","store","HomeView","ArticlesView","ArticleDetailView","AboutView","NotFoundView","ServicesView","ServiceDetailView","ReservationView","RegisterView","LoginView","AdminLayout","DashboardView","ManageArticles","ForumView","QuestionDetailView","AskQuestionView","routes","path","name","component","props","meta","requiresAuth","requiresAdmin","children","redirect","router","history","process","env","BASE_URL","scrollBehavior","top","beforeEach","to","from","next","isLoggedIn","getters","isAdmin","matched","some","record"],"sources":["E:/ibuPintar/frontend/src/router/index.js"],"sourcesContent":["// src/router/index.js\r\nimport { createRouter, createWebHistory } from 'vue-router';\r\nimport store from '@/store'; \r\n\r\n// Impor komponen View Anda\r\nconst HomeView = () => import('@/views/home/HomeView.vue');\r\nconst ArticlesView = () => import('@/views/article/ArticlesView.vue'); // Assuming this is the correct name for article list view\r\nconst ArticleDetailView = () => import('@/views/article/ArticleDetailView.vue');\r\nconst AboutView = () => import('@/views/about/AboutView.vue');\r\nconst NotFoundView = () => import('@/views/error/NotFoundView.vue');\r\nconst ServicesView = () => import('@/views/service/ServicesView.vue');\r\nconst ServiceDetailView = () => import('@/views/service/ServiceDetailView.vue');\r\nconst ReservationView = () => import('@/views/reservation/ReservationView.vue');\r\nconst RegisterView = () => import('@/views/auth/RegisterView.vue');\r\nconst LoginView = () => import('@/views/auth/LoginView.vue');\r\n\r\n// Impor view admin\r\nconst AdminLayout = () => import('@/views/admin/AdminLayout.vue');\r\nconst DashboardView = () => import('@/views/admin/DashboardView.vue');\r\nconst ManageArticles = () => import('@/views/admin/ManageArticles.vue');\r\n\r\n\r\n// --- PASTIKAN VIEW BARU DI-IMPOR DI SINI ---\r\nconst ForumView = () => import('@/views/QnA/ForumView.vue');\r\nconst QuestionDetailView = () => import('@/views/QnA/QuestionDetailView.vue');\r\nconst AskQuestionView = () => import('@/views/QnA/AskQuestionView.vue');\r\n\r\nconst routes = [\r\n  { path: '/', name: 'Home', component: HomeView },\r\n\r\n  // Articles Routes - Combined and corrected\r\n  { path: '/articles', name: 'Articles', component: ArticlesView },\r\n  {\r\n    path: '/articles/:id', // Here, ':id' will capture the slug for ArticleDetailView\r\n    name: 'ArticleDetail',\r\n    component: ArticleDetailView,\r\n    props: true // Passes route params as props. Keep this if your ArticleDetailView uses props for 'id'/'slug'\r\n  },\r\n\r\n  { path: '/layanan', name: 'Services', component: ServicesView },\r\n  { path: '/layanan/:slug', name: 'ServiceDetail', component: ServiceDetailView },\r\n  { path: '/reservasi', name: 'Reservation', component: ReservationView },\r\n  { path: '/about', name: 'About', component: AboutView },\r\n\r\n  // Forum (Tanya Bidan) Routes\r\n  {\r\n    path: '/tanya-bidan',\r\n    name: 'Forum',\r\n    component: ForumView,\r\n  },\r\n  {\r\n    path: '/tanya-bidan/tanya', // Rute untuk form bertanya\r\n    name: 'AskQuestion',\r\n    component: AskQuestionView,\r\n  },\r\n  {\r\n    path: '/tanya-bidan/:id', // Rute untuk detail pertanyaan, assuming 'id' captures the question ID/slug\r\n    name: 'QuestionDetail',\r\n    component: QuestionDetailView,\r\n  },\r\n\r\n  // Catch-all 404 route - should always be the last route\r\n  { path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFoundView },\r\n\r\n  // Registrasi\r\n  { path: '/register', name: 'Register', component: RegisterView },\r\n  \r\n  // Login\r\n  { path: '/login', name: 'Login', component: LoginView },\r\n\r\n  // Rute Admin (dengan layout khusus)\r\n  {\r\n    path: '/admin',\r\n    component: AdminLayout,\r\n    meta: { requiresAuth: true, requiresAdmin: true }, // Penanda rute admin\r\n    children: [\r\n      { path: '', redirect: '/admin/dashboard' }, // Redirect /admin ke /admin/dashboard\r\n      { path: 'dashboard', name: 'AdminDashboard', component: DashboardView },\r\n      { path: 'articles', name: 'ManageArticles', component: ManageArticles },\r\n      // Tambahkan rute admin lain di sini\r\n    ]\r\n  },\r\n\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes,\r\n  scrollBehavior() {\r\n    return { top: 0 };\r\n  },\r\n});\r\n\r\n// ### NAVIGATION GUARD - SANGAT PENTING ###\r\n// Fungsi ini akan berjalan sebelum setiap navigasi\r\nrouter.beforeEach((to, from, next) => {\r\n  const isLoggedIn = store.getters['auth/isLoggedIn'];\r\n  const isAdmin = store.getters['auth/isAdmin'];\r\n\r\n  // Cek apakah rute memerlukan otentikasi\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    if (!isLoggedIn) {\r\n      // Jika belum login, redirect ke halaman login\r\n      next({ name: 'Login' });\r\n    } else {\r\n      // Jika sudah login, cek apakah perlu peran admin\r\n      if (to.matched.some(record => record.meta.requiresAdmin)) {\r\n        if (isAdmin) {\r\n          next(); // Izinkan akses jika admin\r\n        } else {\r\n          next({ name: 'Home' }); // Jika bukan admin, redirect ke beranda\r\n        }\r\n      } else {\r\n        next(); // Izinkan akses jika tidak perlu peran admin\r\n      }\r\n    }\r\n  } else {\r\n    next(); // Selalu izinkan akses ke rute publik\r\n  }\r\n});\r\n\r\nexport default router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}